<style>
.group-block {
  text-align: {{ section.settings.alignment }};
  margin: 0 auto;
  max-width: 1200px;
  padding: {{ section.settings.section_padding }}px {{ section.settings.section_padding_side }}px;
  background: {{ section.settings.bg_color }};
  color: {{ section.settings.text_color }};
}

.group-block-heading {
  font-size: {{ section.settings.heading_size }}px;
  line-height: {{ section.settings.heading_line_height }};
  margin-bottom: {{ section.settings.heading_margin_bottom }}px;
  font-weight: {{ section.settings.heading_weight }};
  color: {{ section.settings.heading_color }};
}

.group-block-wrapper {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax({{ section.settings.min_col_width }}px, 1fr));
  gap: {{ section.settings.grid_gap }}px;
}

.group-card {
  background: {{ section.settings.card_bg }};
  border-radius: {{ section.settings.card_radius }}px;
  padding: {{ section.settings.card_padding }}px;
  transition: all 0.3s ease;
  text-align: center;
  border: {{ section.settings.card_border }};
}

.group-card img {
  margin-bottom: {{ section.settings.image_margin_bottom }}px;
  border-radius: {{ section.settings.image_radius }}px;
  object-fit: cover;
  width: 100%;
  height: auto;

  {% if section.settings.image_ratio == 'square' %}
    aspect-ratio: 1 / 1;
  {% elsif section.settings.image_ratio == 'portrait' %}
    aspect-ratio: 3 / 4;
  {% elsif section.settings.image_ratio == 'landscape' %}
    aspect-ratio: 4 / 3;
  {% elsif section.settings.image_ratio == 'circle' %}
    aspect-ratio: 1 / 1;
    border-radius: 50%;
  {% endif %}
}

.group-card h3 {
  font-size: {{ section.settings.card_title_size }}px;
  line-height: {{ section.settings.card_title_line_height }};
  font-weight: {{ section.settings.card_title_weight }};
  color: {{ section.settings.card_title_color }};
  margin-bottom: {{ section.settings.card_title_margin_bottom }}px;
}

.group-card p {
  font-size: {{ section.settings.card_text_size }}px;
  line-height: {{ section.settings.card_text_line_height }};
  color: {{ section.settings.card_text_color }};
}

.group-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.1);
}
</style>

<div class="group-block">
  <h2 class="group-block-heading">{{ section.settings.heading }}</h2>
  <div class="group-block-wrapper">
    {% for block in section.blocks %}
      <div class="group-card" {{ block.shopify_attributes }}
           style="
             background: {{ block.settings.block_bg }};
             padding: {{ block.settings.block_padding }}px;
             border-radius: {{ block.settings.block_radius }}px;
           ">
        {% if block.settings.image %}
          <img src="{{ block.settings.image | image_url: width: 600 }}" alt="{{ block.settings.title }}">
        {% endif %}
        <h3 style="color: {{ block.settings.title_color }}">{{ block.settings.title }}</h3>
        <p style="color: {{ block.settings.text_color }}">{{ block.settings.desc }}</p>
      </div>
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Group Block",
  "settings": [
    { "type": "text", "id": "heading", "label": "Section Heading", "default": "Shop by collection" },
    { "type": "color", "id": "heading_color", "label": "Heading Color", "default": "#000000" },
    { "type": "range", "id": "heading_size", "label": "Heading Font Size", "min": 12, "max": 60, "step": 1, "default": 28 },
    { "type": "text", "id": "heading_line_height", "label": "Heading Line Height", "default": "1.4" },
    { "type": "range", "id": "heading_margin_bottom", "label": "Heading Margin Bottom", "min": 0, "max": 100, "step": 5, "default": 30 },
    { "type": "select", "id": "heading_weight", "label": "Heading Font Weight", "default": "700", "options": [{"value": "400", "label": "Normal"}, {"value": "600", "label": "Semi Bold"}, {"value": "700", "label": "Bold"}] },
    { "type": "color", "id": "bg_color", "label": "Section Background", "default": "#ffffff" },
    { "type": "color", "id": "text_color", "label": "Default Text Color", "default": "#333333" },
    { "type": "range", "id": "section_padding", "label": "Section Padding (Top/Bottom)", "min": 0, "max": 100, "step": 5, "default": 40 },
    { "type": "range", "id": "section_padding_side", "label": "Section Padding (Left/Right)", "min": 0, "max": 100, "step": 5, "default": 20 },
    { "type": "select", "id": "alignment", "label": "Text Alignment", "default": "center", "options": [{"value":"left","label":"Left"},{"value":"center","label":"Center"},{"value":"right","label":"Right"}] },
    { "type": "range", "id": "min_col_width", "label": "Min Column Width", "min": 150, "max": 400, "step": 10, "default": 250 },
    { "type": "range", "id": "grid_gap", "label": "Grid Gap", "min": 0, "max": 80, "step": 5, "default": 30 },
    { "type": "color", "id": "card_bg", "label": "Card Background", "default": "#ffffff" },
    { "type": "text", "id": "card_border", "label": "Card Border", "default": "1px solid #eee" },
    { "type": "range", "id": "card_radius", "label": "Card Border Radius", "min": 0, "max": 50, "step": 1, "default": 10 },
    { "type": "range", "id": "card_padding", "label": "Card Padding", "min": 0, "max": 80, "step": 5, "default": 20 },

    { "type": "select", "id": "image_ratio", "label": "Image Aspect Ratio", "default": "square",
      "options": [
        {"value": "square", "label": "Square 1:1"},
        {"value": "portrait", "label": "Portrait 3:4"},
        {"value": "landscape", "label": "Landscape 4:3"},
        {"value": "circle", "label": "Circle"}
      ]
    },
    { "type": "range", "id": "image_margin_bottom", "label": "Image Margin Bottom", "min": 0, "max": 60, "step": 5, "default": 15 },
    { "type": "range", "id": "image_radius", "label": "Image Border Radius", "min": 0, "max": 50, "step": 1, "default": 0 },

    { "type": "range", "id": "card_title_size", "label": "Card Title Size", "min": 12, "max": 40, "step": 1, "default": 18 },
    { "type": "text", "id": "card_title_line_height", "label": "Card Title Line Height", "default": "1.4" },
    { "type": "range", "id": "card_title_margin_bottom", "label": "Card Title Margin Bottom", "min": 0, "max": 50, "step": 1, "default": 10 },
    { "type": "select", "id": "card_title_weight", "label": "Card Title Font Weight", "default": "600", "options": [{"value":"400","label":"Normal"},{"value":"600","label":"Semi Bold"},{"value":"700","label":"Bold"}] },
    { "type": "color", "id": "card_title_color", "label": "Card Title Color", "default": "#000000" },
    { "type": "range", "id": "card_text_size", "label": "Card Text Size", "min": 10, "max": 30, "step": 1, "default": 14 },
    { "type": "text", "id": "card_text_line_height", "label": "Card Text Line Height", "default": "1.6" },
    { "type": "color", "id": "card_text_color", "label": "Card Text Color", "default": "#555555" }
  ],
  "blocks": [
    {
      "type": "block",
      "name": "Custom Block",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "text", "id": "title", "label": "Title", "default": "Block Title" },
        { "type": "color", "id": "title_color", "label": "Title Color", "default": "#000000" },
        { "type": "textarea", "id": "desc", "label": "Description" },
        { "type": "color", "id": "text_color", "label": "Text Color", "default": "#555555" },
        { "type": "color", "id": "block_bg", "label": "Block Background", "default": "#ffffff" },
        { "type": "range", "id": "block_padding", "label": "Block Padding", "min": 0, "max": 60, "step": 5, "default": 20 },
        { "type": "range", "id": "block_radius", "label": "Block Border Radius", "min": 0, "max": 50, "step": 1, "default": 10 }
      ]
    }
  ],
  "presets": [
    { "name": "Group Block", "category": "Custom" }
  ]
}
{% endschema %}
